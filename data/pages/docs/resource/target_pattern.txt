====== Target Pattern ======


===== About =====
A ''target pattern'' is an expression that defines the name of the target. 

This pattern can include the captured characters from the [[data_selector|data selector]] glob expression.


You can refer to this pattern:
  * in a [[:docs:resource:target_data_uri|target data uri]]
  * or in an operation with the ''target-pattern'' argument.
===== Syntax =====

A target pattern is a string that contains at minimal a variable expression.

Variable Expression:
```bash
${variableName}
# or
$variableName
```


===== Available Variable Name =====

In your pattern, you can reference any of the following variables.

==== Glob Backreference created from a data source selector ====


In the pattern, you can reference a [[docs:common:globbing|globbing matched wildcard]] from a [[data_selector|data source selector]] using the ''%%$x%%'' syntax where x indicates the index of a glob pattern. ie
      * ''%%$0%%'' defines the whole expression (ie the whole path)
      * ''%%$1%%'' defines the first matched wildcard
      * ''%%$2%%'' defines the second matched wildcard
      * and so on until ''%%$9%%''.


You can see the value of the back reference with the [[docs:tabul:data:list|tabul data list command]].
If you want to know the value of ''%%$1%%'', just ask for the attribute ''1''

Example with [[docs:system:tpcds|tpcds]] where we want to capture the name of the web table but without the prefix.
<unit>
<code bash>
tabul data list  -a name -a 1 web_*@tpcds
</code>
<console>
name          1
-----------   -------
web_page      page
web_returns   returns
web_sales     sales
web_site      site
</console>
</unit>
==== Data Resource Attribute Reference ====


In the pattern, you can reference a [[docs:resource:attribute|resource attribute]] using the ''%%$x%%'' or ''%%${x}%%'' syntax where ''x'' indicates the name of the attribute.

Example:
      * ''%%$logicalName%%'' defines the [[docs:resource:logical_name|logical name]] of the resource

You can see all available attributes with the [[docs:tabul:data:info|data info command]].

<unit>
<code bash>
tabul data info web_page@tpcds
</code>
<console>
Information about the data resource (web_page@tpcds)
attribute          value                                                                                              description
----------------   ------------------------------------------------------------------------------------------------   -----------------------------------------------------
ABSOLUTE_PATH      web_page                                                                                           The absolute path on the data system
CONNECTION         tpcds                                                                                              The connection name
COUNT                                                                                                                 The number of records
DATA_URI           web_page@tpcds                                                                                     The data uri
LOGICAL_NAME       web_page                                                                                           The logical name
MD5                2d3f08a0ad007e5236ed694250e89721                                                                   The Md5 hash
NAME               web_page                                                                                           The name of the data resource
PARENT             /                                                                                                  The parent
PATH               web_page                                                                                           The relative path to the default connection path
SHA384             0d3fcd0bd2dc1aa6c14a6ce4a4c8acff06a6194a4f56f4730bbb371aaf490da1fe318f9f11ba44157ffd53d501e2f551   The Sha384 hash
SHA384_INTEGRITY   sha384-DT/NC9LcGqbBSmzkpMis/wamGUpPVvRzC7s3Gq9JDaH+MY+fEbpEFX/9U9UB4vVR                            The sha384 value used in the html integrity attribute
SIZE                                                                                                                  The number of byte
SUBTYPE            relation                                                                                           The media subType
TYPE               sql/relation                                                                                       The media type
</console>
</unit>

==== Column Value Reference ====

If your step is running on [[docs:flow:granularity|record level]] (Example: [[:docs:op:split|split]])
you can also add the record value of a column using the ''%%$x%%'' or ''%%${x}%%'' syntax where ''x'' should be replace by the [[docs:resource:column|column name]].
