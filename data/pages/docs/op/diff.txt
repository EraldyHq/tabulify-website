---json
{
    "aliases": [
        { "path": ":docs:op:compare" }
    ],
    "page_id": "xh2mvotwt2ky7k4pjza6x"
}
---
====== Data Operation - Diff (Comparison) ======


===== About =====
A ''diff'' is a [[op|data operation]] that will search and show differences between [[docs:resource:resource|data resources]].

The ''diff'' may be performed:
  * at the [[docs:resource:metadata|metadata level]], meaning
      * on the [[docs:resource:attribute|data resource attributes]]
      * on the [[docs:resource:structure|data structure]]
  * or and at the data level:
    * logically: record by record
    * physically: block by block

===== Example =====


  * [[howto:getting_started:10_resource_comparison]]





===== Arguments =====

^ Argument ^ Default ^ Description ^
| [[#type|type]] | ''content'' | The type of diff |
| [[#reporttype|report-type]] | ''resource'' | The report type (level) |
| [[#driver columns|driver-columns]] |  | The columns name that drive the diff (Should be set to the unique columns normally). Default to \\ the record id (ie row id, line id) for a data comparison \\ the column name for a data structure comparison |
| ''fail'' | true | If true, the operation fails if the diff shows inequality |
| [[#target-data-uri|target-data-uri]] | | a [[:docs:resource:target_data_uri|target data uri]] that will define and select the target resource to compare (if not set, the comparison is done against an empty set) |
| ''target-attributes'' | | The [[docs:resource:attribute|data attributes]] defined in a [[:docs:resource:data-definition|data definition]] format |

==== Target Data Uri ====

The [[:docs:resource:target_data_uri|target data uri selector]] may be not given as argument. If this is the case, the comparison will except an empty resource.

==== Report Type ====
The ''report-level'' argument defines what the command will return:
  * ''resource'' - a comparison report will be created for all comparison
  * ''record'' - a comparison report will be created for each comparison and the record data comparison will be available
  * ''all'' - all type of comparison report will be created

==== Type ====
The ''type'' defines the origin of the data to compare.
  * ''content'' - the default - the data to compare will be the records
  * ''structure'' - the data to compare will be the [[:docs:resource:structure|column definitions]] without the attributes
  * ''attributes'' - the data to compare will be the [[:docs:resource:attribute|data attributes]] without the structure.

==== Driver Columns ====
The ''driver columns'' are the columns that drives the comparison process (normally the unique columns)

For instance, if you compare two resources that have an unique id column,
  * if the comparison has fetched:
      * a source record with a id value of ''1''
      * a target record with a id value of ''2''
  * the comparator will:
      * mark the source record has missing in the target
      * fetch records only from the source until it finds the record with the id ''2'' or above.


===== Cli =====

The ''diff'' operation is available in the [[:docs:tabul:data:diff|tabul data diff]] command